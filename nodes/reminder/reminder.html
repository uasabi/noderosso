<script type="text/javascript">
(function(){
  RED.nodes.registerType('reminder', {
    category: 'function',
    color: '#a6bbcf',
    defaults: {
      name: { value: '' }
    },
    credentials: {
      clientId: {type: 'text', required: true},
      clientSecret: {type: 'password', required: true}
    },
    inputs: 1,
    outputs: 0,
    icon: 'file.png',
    label: function () {
      return this.name || 'reminder'
    },
    oneditsave: function() {
      window.open(`reminder/auth?id=${this.id}&clientId=${$('#node-input-clientId').val()}&clientSecret=${$('#node-input-clientSecret').val()}`, '_blank');
    }
  })
})();
</script>

<script type="text/html" data-template-name="reminder">
 <div class="form-row">
     <label for="node-input-prefix"><i class="fa fa-tag"></i> Name</label>
     <input type="text" id="node-input-name">
 </div>
  <div class="form-row">
      <label for="node-input-clientId"><i class="icon-tag"></i> Client ID</label>
      <input type="text" id="node-input-clientId">
  </div>
  <div class="form-row">
      <label for="node-input-clientSecret"><i class="icon-tag"></i> Client secret</label>
      <input type="text" id="node-input-clientSecret">
  </div>
  <p>Once clicking "Done", a new window will popup to ask your google account use the app</p>
</script>

<script type="text/html" data-help-name="reminder">
  <p>Reminder that pushes REMINDER events from google calendar to the current time.</p>
</script>
